using System;

namespace Battleship
{
    public class BoardGui : IBoardGui
    {
        private string _columnName = "ABCDEFGHIJ";

        private readonly IBoardInitialise _board1;
        private readonly IBoardInitialise _board2;
        private string[,] boardData;
        private const int _columns = 42;
        private const int _rows = 22;
        public BoardGui(IBoardInitialise board1, IBoardInitialise board2)
        {
            /*
                  A   B
                +---+---+
               1| M | H |
                +---+---+
            */
            _board1 = board1;
            _board2 = board2;
            boardGuiInitialise();
        }
        private void boardGuiInitialise()
        {
            boardData = new string[_rows, _columns]{
                {"  "," "," ","A"," "," "," ","B"," "," "," ","C"," "," "," ","D"," "," "," ","E"," "," "," ","F"," "," "," ","G"," "," "," ","H"," "," "," ","I"," "," "," ","J"," "," "},
                {"  ","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+"},
                {" 1","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"},
                {"  ","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+"},
                {" 2","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"},
                {"  ","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+"},
                {" 3","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"},
                {"  ","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+"},
                {" 4","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"},
                {"  ","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+"},
                {" 5","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"},
                {"  ","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+"},
                {" 6","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"},
                {"  ","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+"},
                {" 7","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"},
                {"  ","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+"},
                {" 8","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"},
                {"  ","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+"},
                {" 9","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"},
                {"  ","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+"},
                {"10","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"," "," "," ","|"},
                {"  ","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+","-","-","-","+"}
            };
        }
        public void DrawBoard()
        {
            int indexOfColumn = 3;
            int indexOfRow = 2;
            int board1cell = 0;
            int board2cell = 0;
            ConsoleColor[] colors = (ConsoleColor[])ConsoleColor.GetValues(typeof(ConsoleColor));
            Console.BackgroundColor = colors[0];
            for (var i = 0; i < _rows; i++)
            {
                Console.Write("    ");
                for (var j = 0; j < _columns; j++)
                {
                    if (i == indexOfRow && j == indexOfColumn)
                    {
                        if (_board1.BoardCells[board1cell].CellValue > 0)
                        {
                            Console.ForegroundColor = colors[_board1.BoardCells[board1cell].CellValue];
                            Console.Write(_board1.BoardCells[board1cell].CellValue);
                        }
                        else
                        {
                            Console.Write(" ");
                        }
                        board1cell++;
                        indexOfColumn += 4;
                    }
                    else
                    {
                        Console.ForegroundColor = colors[15];
                        Console.Write(boardData[i, j]);
                    }
                }
                Console.Write("      ");
                for (var j = 40; j < _columns + 40; j++)
                {
                    if (i == indexOfRow && j == indexOfColumn)
                    {
                        if (_board2.BoardCells[board2cell].CellValue > 0)
                        {
                            Console.ForegroundColor = colors[_board2.BoardCells[board2cell].CellValue];
                            Console.Write(_board2.BoardCells[board2cell].CellValue);
                        }
                        else
                        {
                            Console.Write(" ");
                        }
                        board2cell++;
                        indexOfColumn += 4;
                    }
                    else
                    {
                        Console.ForegroundColor = colors[15];
                        Console.Write(boardData[i, j - 40]);
                    }
                }
                if (i == indexOfRow)
                {
                    indexOfColumn = 3;
                    indexOfRow += 2;
                }
                Console.WriteLine();
            }
        }
    }
}
